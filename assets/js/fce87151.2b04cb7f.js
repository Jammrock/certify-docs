"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8444],{3905:(e,t,i)=>{i.d(t,{Zo:()=>d,kt:()=>h});var n=i(7294);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function a(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var c=n.createContext({}),l=function(e){var t=n.useContext(c),i=t;return e&&(i="function"==typeof e?e(t):s(s({},t),e)),i},d=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var i=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,d=a(e,["components","mdxType","originalType","parentName"]),u=l(i),f=r,h=u["".concat(c,".").concat(f)]||u[f]||p[f]||o;return i?n.createElement(h,s(s({ref:t},d),{},{components:i})):n.createElement(h,s({ref:t},d))}));function h(e,t){var i=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=i.length,s=new Array(o);s[0]=f;var a={};for(var c in t)hasOwnProperty.call(t,c)&&(a[c]=t[c]);a.originalType=e,a[u]="string"==typeof e?e:r,s[1]=a;for(var l=2;l<o;l++)s[l]=i[l];return n.createElement.apply(null,s)}return n.createElement.apply(null,i)}f.displayName="MDXCreateElement"},9109:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>l});var n=i(7462),r=(i(7294),i(3905));const o={id:"ssl-windows",title:"Using Certificates in Windows"},s=void 0,a={unversionedId:"guides/ssl-windows",id:"guides/ssl-windows",title:"Using Certificates in Windows",description:"Using SSL/TLS certificates in Windows has a few aspects that can prevent your site working properly if don't know about them. This guide outlines some key points. See the special mention below for limitations regarding Windows Server 2008 R2 (IIS 7.5) and lower.",source:"@site/docs/guides/ssl-windows.md",sourceDirName:"guides",slug:"/guides/ssl-windows",permalink:"/docs/guides/ssl-windows",draft:!1,editUrl:"https://github.com/webprofusion/certify-docs/edit/master/docs/guides/ssl-windows.md",tags:[],version:"current",frontMatter:{id:"ssl-windows",title:"Using Certificates in Windows"},sidebar:"docSiderbar",previous:{title:"Best Practices",permalink:"/docs/guides/best-practices"},next:{title:"Background Service",permalink:"/docs/backgroundservice"}},c={},l=[{value:"There Can Be Only One (SSL Binding Per Port/IP)",id:"there-can-be-only-one-ssl-binding-per-portip",level:2},{value:"Server Name Indication (SNI)",id:"server-name-indication-sni",level:2},{value:"Binding Conflicts",id:"binding-conflicts",level:2},{value:"Invalid Private Key Permissions",id:"invalid-private-key-permissions",level:2}],d={toc:l},u="wrapper";function p(e){let{components:t,...i}=e;return(0,r.kt)(u,(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Using SSL/TLS certificates in Windows has a few aspects that can prevent your site working properly if don't know about them. This guide outlines some key points. ",(0,r.kt)("strong",{parentName:"p"},"See the special mention below for limitations regarding Windows Server 2008 R2 (IIS 7.5) and lower.")),(0,r.kt)("p",null,"If you are new to managing certificates or want to know more, you can read more about ",(0,r.kt)("a",{parentName:"p",href:"/docs/guides/certificates"},"Certificates")," themselves."),(0,r.kt)("h2",{id:"there-can-be-only-one-ssl-binding-per-portip"},"There Can Be Only One (SSL Binding Per Port/IP)"),(0,r.kt)("p",null,"Windows only allows one SSL binding per specific IP, per Port (so typically port 443 for https). So if you use a fixed IP for your http website you probably don't want to do that for your SSL binding as well, unless you have lots of spare IP addresses on the server (you probably don't). This applies to all current versions of Windows."),(0,r.kt)("h2",{id:"server-name-indication-sni"},"Server Name Indication (SNI)"),(0,r.kt)("p",null,"The good news is that if you ",(0,r.kt)("strong",{parentName:"p"},"do not specify a fixed IP for your binding"),", Windows can decide which website to match port 443 requests against using ",(0,r.kt)("strong",{parentName:"p"},"Server Name Indication (SNI)"),". This applies to Windows Server 2012 and higher, or versions running IIS 8.0 or higher."),(0,r.kt)("p",null,"If you use a binding of IP ",(0,r.kt)("em",{parentName:"p"},"All Unassigned")," in IIS you can then share port 443 across multiple websites by also specifying the hostname to match against in your binding, and enabling SNI."),(0,r.kt)("p",null,"You can learn more about SNI in IIS 8.0 and higher here: ",(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/iis/get-started/whats-new-in-iis-8/iis-80-server-name-indication-sni-ssl-scalability"},"https://docs.microsoft.com/en-us/iis/get-started/whats-new-in-iis-8/iis-80-server-name-indication-sni-ssl-scalability")),(0,r.kt)("h2",{id:"binding-conflicts"},"Binding Conflicts"),(0,r.kt)("p",null,"Certify configures bindings with SNI enabled for you by default, but ",(0,r.kt)("strong",{parentName:"p"},"if you already have fixed IP bindings for SSL certificates look out for issues"),". Unless you have multiple IP addresses (which are not specifically bound to another TLS/SSL certificate) then creating any new certificate bindings will result in a conflict, and you could start seeing the wrong certificate being served by IIS for your website. "),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"IP binding conflicts are the number one reason for certificate confusion in Windows/IIS."),"\nIf your site is serving the wrong certificate this is probably the cause."),(0,r.kt)("h2",{id:"invalid-private-key-permissions"},"Invalid Private Key Permissions"),(0,r.kt)("p",null,"If IIS cannot read or otherwise use the private key for your SSL certificate (either it's corrupted or it was created by a different user account) it will fallback to the next SSL Certificate it can find. This usually results in the website being presented with the wrong certificate (and results in various security errors in the Web Browsers). If IIS can't find another SSL certificate it will fail to serve any content at all. For this reason, be careful using non-standard accounts to create certificates. Changing the Certify Certificate Manager background service to run under an alternative service account is not recommended or supported."),(0,r.kt)("h1",{id:"windows-server-2008-r2-iis-75-limitations"},"Windows Server 2008 R2 (IIS 7.5) Limitations"),(0,r.kt)("p",null,"Windows Server 2008 R2 and lower versions do not support SNI, so when a certificate binding is created it is associated with the IP address of the machine (actually the IP and port, usually port 443 for https). For this reason it is often difficult to use Server 2008 R2 or lower to host more than one https site."),(0,r.kt)("p",null," Unless you have multiple IP addresses available on the machine (or you use a non-standard port) you will only be able to have one https/certificate binding in IIS. If two or more bindings point to the same certificate (for instance a Wildcard certificate, or a SAN certificate with multiple host names included), deleting one binding will also affect the other binding(s) and you will need to manually fix bindings."))}p.isMDXComponent=!0}}]);