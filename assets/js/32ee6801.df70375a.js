"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7987],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>f});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var c=n.createContext({}),m=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=m(e.components);return n.createElement(c.Provider,{value:t},e.children)},p="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=m(a),u=i,f=p["".concat(c,".").concat(u)]||p[u]||s[u]||r;return a?n.createElement(f,o(o({ref:t},d),{},{components:a})):n.createElement(f,o({ref:t},d))}));function f(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[p]="string"==typeof e?e:i,o[1]=l;for(var m=2;m<r;m++)o[m]=a[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},9550:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>s,frontMatter:()=>r,metadata:()=>l,toc:()=>m});var n=a(7462),i=(a(7294),a(3905));const r={id:"commandline",title:"Command Line (CLI)"},o=void 0,l={unversionedId:"commandline",id:"commandline",title:"Command Line (CLI)",description:"A set of command line are available using the tool certify.exe which is found in the installation directory. The commands must be performed using an elevated administrators account.",source:"@site/docs/commandline.md",sourceDirName:".",slug:"/commandline",permalink:"/docs/commandline",draft:!1,editUrl:"https://github.com/webprofusion/certify-docs/edit/master/docs/commandline.md",tags:[],version:"current",frontMatter:{id:"commandline",title:"Command Line (CLI)"},sidebar:"docSiderbar",previous:{title:"Certificate - Advanced Options",permalink:"/docs/features/certificate-advanced"},next:{title:"CSV Bulk Import",permalink:"/docs/csv-import"}},c={},m=[{value:"Manage ACME Accounts",id:"manage-acme-accounts",level:2},{value:"Example - Create Let&#39;s Encrypt Account:",id:"example---create-lets-encrypt-account",level:4},{value:"Example - Add Zero SSL Account with your EAB key id and key:",id:"example---add-zero-ssl-account-with-your-eab-key-id-and-key",level:4},{value:"Listing Managed Certificates",id:"listing-managed-certificates",level:3},{value:"Performing Renewals and Deployment Tasks",id:"performing-renewals-and-deployment-tasks",level:3},{value:"Adding or Remove Managed Certificates",id:"adding-or-remove-managed-certificates",level:3},{value:"Diagnostics",id:"diagnostics",level:3},{value:"Managing license activation",id:"managing-license-activation",level:3}],d={toc:m},p="wrapper";function s(e){let{components:t,...a}=e;return(0,i.kt)(p,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"A set of command line are available using the tool ",(0,i.kt)("em",{parentName:"p"},"certify.exe")," which is found in the installation directory. The commands must be performed using an elevated administrators account."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Most users do not need to use the command line options at all. By default all certificate renewals are taken care of automatically by the Certify background service.")),(0,i.kt)("p",null,"Usage: ",(0,i.kt)("inlineCode",{parentName:"p"},"certify <command>")),(0,i.kt)("h2",{id:"manage-acme-accounts"},"Manage ACME Accounts"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify acmeaccount list"),": list registered acme account details (JSON output)")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify acmeaccount add <ACME CA ID> <your contact email> <optional EAB key id> <optional EAB Key>"),": add a new ACME account"))),(0,i.kt)("p",null,"You can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"acmeacccount add")," command to add/create a new ACME account registration. Using this command implies your agreement with the chosen ACME CAs current terms and conditions :"),(0,i.kt)("h4",{id:"example---create-lets-encrypt-account"},"Example - Create Let's Encrypt Account:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"certify acmeaccount add letsencrypt.org hosting@example.com")),(0,i.kt)("h4",{id:"example---add-zero-ssl-account-with-your-eab-key-id-and-key"},"Example - Add Zero SSL Account with your EAB key id and key:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},'certify acmeaccount add zerossl.com hosting@example.com "abcdkeyid" "_Example_Key_Value_"')),(0,i.kt)("h3",{id:"listing-managed-certificates"},"Listing Managed Certificates"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify list")," : list managed certificates and current running/not running status in IIS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify list --json <path-to-output-json>")," : output list of managed certificates as JSON to a given file path."))),(0,i.kt)("h3",{id:"performing-renewals-and-deployment-tasks"},"Performing Renewals and Deployment Tasks"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify renew")," : renew certificates for all auto renewed managed certificates, if they are due or have not yet been requested.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify renew --renew-all-due")," : renew all certificates which are due or have not yet been requested even if auto-renew is not enabled.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify renew --force-renew-all")," : renewal for all auto renewed certificates even if they are not yet due.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify renew --renew-witherrors")," : attempt renewal for all certificates which have most recently failed to renew.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},'certify deploy "<managed cert id>" "<task id>"')," : perform a specific deployment task for the given managed certificate. See the Manual trigger mode for deployment tasks."))),(0,i.kt)("h3",{id:"adding-or-remove-managed-certificates"},"Adding or Remove Managed Certificates"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"certify importcsv")," : import managed certificates from a CSV file. See ",(0,i.kt)("a",{parentName:"li",href:"/docs/csv-import"},"CSV Import")," for more details")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"certify add")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"certify remove")," commands can be used to add or remove domains from an existing managed certificate or create a new managed certificate. You can find the correct managed certificate ID in the app under ",(0,i.kt)("em",{parentName:"p"},"Certificate > Advanced > Actions > Managed Certificate Reference Id")," (e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"a02e3afe-49ba-470a-83e5-2e397aa946eb:1"),")."),(0,i.kt)("p",null,"These will not request/renew the actual certificate unless you append ",(0,i.kt)("inlineCode",{parentName:"p"},"--perform-request")," to the end of the command. These commands assume the same domain validation settings are being used for all domains on the same managed certificate:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify remove <managed cert id> domain1.test.com;domain2.test.com")," : remove one or more certificates from the configuration of a managed certificate. If removing a domain will mean there are zero domains remaining on the certificate then the managed certificate will be removed completely.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify add <managed cert id, or new> domain1.test.com;domain2.test.com")," : add one or more additional domains to the configuration of a managed certificate. e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"certify add new example.com"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify add new domain1.test.com;domain2.test.com --template C:\\Temp\\managedcert-template.json")," : add new managed cert with given domain, using a template (json exported from an existing managed cert). "))),(0,i.kt)("admonition",{title:"using templates",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Templates are an advanced feature intended only for users who require managed certificate automation with non-default challenge configuration (e.g. DNS validation). "),(0,i.kt)("p",{parentName:"admonition"},"To generate a template:"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"Use ",(0,i.kt)("inlineCode",{parentName:"li"},"certify list --json output.json")," to export your managed certificates as JSON"),(0,i.kt)("li",{parentName:"ul"},"Edit the JSON file down to a single item, removing the array ",(0,i.kt)("inlineCode",{parentName:"li"},"[ ... ]")),(0,i.kt)("li",{parentName:"ul"},"Save the file as your new template. Domains etc will be discarded from the template and you still need to provide these arguments")),(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("strong",{parentName:"p"},"Templates are not guaranteed to stay compatible between major version updates so you should test integrations which use them with each new release."))),(0,i.kt)("h3",{id:"diagnostics"},"Diagnostics"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify diag")," : check existing ssl bindings and managed certificate integrity")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify httpchallenge keys=stop,configcheck")," : run the temporary http challenge server on port 80 to test firewall and routing configuration. This uses http.sys to register a listener for ACME http challenges as ",(0,i.kt)("inlineCode",{parentName:"p"},"http:/*/.well-known/acme-challenge/")," and will not conflict with IIS. The server will run for 60 seconds after the last matching request is received or until stopped by calling the control key. "))),(0,i.kt)("p",null,"With the example control key ",(0,i.kt)("inlineCode",{parentName:"p"},"stop")," and config check key ",(0,i.kt)("inlineCode",{parentName:"p"},"configcheck")," you can:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"test your servers response using ",(0,i.kt)("inlineCode",{parentName:"li"},"http://<your domain or server ip>/.well-known/acme-challenge/configcheck")," e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"http://127.0.0.1/.well-known/acme-challenge/configcheck"),"  "),(0,i.kt)("li",{parentName:"ul"},"stop the service using ",(0,i.kt)("inlineCode",{parentName:"li"},"http://<your domain or server ip>/.well-known/acme-challenge/stop"),". ")),(0,i.kt)("p",null,"The user agent returned should be ",(0,i.kt)("inlineCode",{parentName:"p"},"Certify/HttpChallengeServer")),(0,i.kt)("h3",{id:"managing-license-activation"},"Managing license activation"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify activate <email> <key>")," : activate the license for this instance of Certify The Web. Useful for larger scale automated deployments.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"certify deactivate <email>")," : deactivates the license for this instance of Certify The Web."))))}s.isMDXComponent=!0}}]);