"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2911],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>y});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=a.createContext({}),s=function(e){var t=a.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},l="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),l=s(r),m=n,y=l["".concat(c,".").concat(m)]||l[m]||d[m]||o;return r?a.createElement(y,i(i({ref:t},u),{},{components:r})):a.createElement(y,i({ref:t},u))}));function y(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=m;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p[l]="string"==typeof e?e:n,i[1]=p;for(var s=2;s<o;s++)i[s]=r[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},3082:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>p,toc:()=>s});var a=r(7462),n=(r(7294),r(3905));const o={id:"task-azure-app-service",title:"Deployment Task - Azure App Service"},i=void 0,p={unversionedId:"deployment/tasks/task-azure-app-service",id:"deployment/tasks/task-azure-app-service",title:"Deployment Task - Azure App Service",description:'The Azure App Service task is built to deploy to either a "web-app" or a "function" via Azure App Service.',source:"@site/docs/deployment/tasks/azure-app-service.md",sourceDirName:"deployment/tasks",slug:"/deployment/tasks/task-azure-app-service",permalink:"/docs/deployment/tasks/task-azure-app-service",draft:!1,editUrl:"https://github.com/webprofusion/certify-docs/edit/master/docs/deployment/tasks/azure-app-service.md",tags:[],version:"current",frontMatter:{id:"task-azure-app-service",title:"Deployment Task - Azure App Service"}},c={},s=[],u={toc:s},l="wrapper";function d(e){let{components:t,...r}=e;return(0,n.kt)(l,(0,a.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,'The Azure App Service task is built to deploy to either a "web-app" or a "function" via Azure App Service. '),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},'Before using this task, note that Azure offer their own free "App Service Managed Certificates", so you may not need to setup your own certificate automation. We recommend using that feature or deploying to Key Vault instead of using this task, which is now deprecated.')),(0,n.kt)("p",null,"You need a working web-app or function app and an Application User setup using Azure AD, with a corresponding Secret. Azure requires that your app plan is Basic or higher to enable certificates and you must add your custom domain in you azure app settings before you can add a certificate. After setting up your app service in Azure it can take several minutes before the service is ready to accept certificate deployments via the API."),(0,n.kt)("p",null," The info you need to collect for an Azure Application User credential is:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Directory (Tenant) ID, "),(0,n.kt)("li",{parentName:"ul"},"Application (Client) ID, "),(0,n.kt)("li",{parentName:"ul"},"Client Secret: (which you need to add using Azure AD and which you need to remind yourself to renew/update periodically).")),(0,n.kt)("p",null,"Ideally start with a working managed certificate, you may find that Azure requires a password to be set on the PFX that will be imported, so you can set that under ",(0,n.kt)("em",{parentName:"p"},"Certificate > Advanced > Signing & Security - Security")," (scroll down for the option). Select ",(0,n.kt)("em",{parentName:"p"},"Request Certificate")," again to re-build the certificate with the password set."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Add the ",(0,n.kt)("em",{parentName:"p"},"Deploy to Azure App Service")," task under Tasks for your managed certificate.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"On the ",(0,n.kt)("em",{parentName:"p"},"Task Parameters"),' tab, select/add the Azure App Service Credential you want to use to authenticate to the App Service, and the Azure App Service you want to deploy to. To add a stored credential, click "New" next to the credentials dropdown list to save new app login details')),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Save the managed certificate and then click the \u25b6\ufe0f play button next to the task to run it. You should see a success message in the task log.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Subsequent automated renewals will also run the deployment task after the renewal has completed successfully."))))}d.isMDXComponent=!0}}]);